# Γραμμικός & Δικτυακός Προγραμματισμός: 2η Εργασία, 2019-2020

#### Τσιρπάνης Θεόδωρος (`dai19090`)

## Το πρόβλημα

Η δεύτερη εργασία ζητάει την υλοποίηση ενός συντακτικού αναλυτή που διαβάζει γραμμικά προβλήματα σε μορφή κειμένου και βρίσκει και εμφανίζει το δυικό τους.

## Το πρόγραμμα

Το πρόγραμμα βασίζεται σε αυτό της προηγούμενης άσκησης και αριθμεί περίπου 370 γραμμές κώδικα χωρίς τα σχόλια. Έχει τις εξής αλλαγές:

* Προστέθηκε η μέθοδος `Dual` στον τύπο `LPPWithMatrices` που επιστρέφει το δυικό ενός προβλήματος που αναπαρίσταται με πίνακες.

* Στον τύπο `LPPWithMatrices`, προστέθηκε το πεδίο `NatConstrs` που συμβολίζει τους φυσικούς περιορισμούς κάθε μεταβλητής, για να μπορούν να αλλάξουν κατά τη μετατροπή στο δυικό πρόβλημα. Γραμμικά προβλήματα που δημιουργήθηκαν από τον parser έχουν πάντα όλες τους τις μεταβλητές θετικές.

* Σε μια μορφή αυτοεπαλήθευσης, το πρόγραμμα βρίσκει το δυικό του δυικού προβλήματος και εμφανίζει ένα μήνυμα σφάλματος αν δεν είναι ίσο με το πρωτεύον.

* Το πρόγραμμα εμφανίζει τα γραμμικά προβλήματα σε μια μορφή που μοιάζει στο πώς θα γραφόταν στο χαρτί. Οι συναρτήσεις που μορφοποιούν τα γραμμικά προβλήματα σε κείμενο υπάρχουν στο αρχείο `Formatter.fs`.

* Τα υπόλοιπα αρχεία κώδικα μετονομάστηκαν σε πιο περιγραφικά ονόματα.

*
  Το πρόγραμμα χρησιμοποιεί την έκδοση `6.0.0` της βιβλιοθήκης συντακτικής ανάλυσης Farkle. Η σημαντικότερη νέα λειτουργία του είναι [η δημιουργία των πινάκων συντακτικής ανάλυσης κατά τη _μεταγλώττιση_ του προγράμματος][precompiler] (όπως τα εργαλεία Lex/Yacc), όχι κατά την εκτέλεση. Αυτό έχει δύο πλεονεκτήματα:

  * Επειδή η δημιουργία των πινάκων είναι μια χρονοβόρα διαδικασία, τώρα που γίνεται πριν την εκτέλεση του προγράμματος, η ταχύτητα εκτέλεσής του έχει αυξηθεί αισθητά.

    > Αυτή η επιτάχυνση όμως δε θα φανεί αν το πρόγραμμα εκτελεστεί όπως υποδεικνύεται παρακάτω, επειδή η εντολή `dotnet run` και μεταγλωττίζει και εκτελεί το πρόγραμμα.

  * Αν υπήρχαν τυχόν προβλήματα με την γραμματική (όπως LALR conflicts) θα εντοπίζονταν πολύ νωρίτερα, κατά τη μεταγλώττισή, προκαλώντας ένα σφάλμα.

  Η προμεταγλώττιση της γραμματικής είναι μια δοκιμαστική λειτουργία του Farkle και παρά τους εκτεταμένους ελέγχους, υπάρχει πάντα η πιθανότητα να αποτύχει. Αν πετύχει, θα εμφανιστεί κατάλληλο μήνυμα κατά τη μεταγλώττιση, αλλά σε αντίθετη περίπτωση, υπάρχει μια γραμμή στο αρχείο του project με την οδηγία να αφαιρεθεί.

  ~~Επίσης η νέα έκδοση του Farkle έκανε ορισμένα διαγνωστικά μηνύματα λιγότερο φλύαρα.~~

### Οδηγίες εκτέλεσης

Όπως και πριν, για την εκτέλεση του προγράμματος, απαιτείται η εγκατάσταση [της έκδοσης 6 του .NET SDK][dotnet].

Μετά την εγκατάσταση του SDK, το πρόγραμμα μπορεί να εκτελεστεί ανοίγοντας μια γραμμή εντολών και εκτελώντας την εντολή `dotnet run <filename>`. ~~Διαγνωστικές πληροφορίες για την συντακτική ανάλυση του δοθέντος αρχείου μπορούν να εμφανιστούν με την εντολή `dotnet run <filename> --debug`.~~ Για την εμφάνιση των αποτελεσμάτων σε ένα αρχείο, το πρόγραμμα μπορεί να εκτελεστεί με την εντολή `dotnet run <filename> <output>`. ~~Το όρισμα `--debug` μπορεί πάλι να προστεθεί στο τέλος της εντολής. Τα διαγνωστικά μηνύματα εμφανίζονται πάντα στην κονσόλα (στο stderr για την ακρίβεια).~~

[precompiler]: https://teo-tsirpanis.github.io/Farkle/the-precompiler.html
[dotnet]: https://dotnet.microsoft.com/download
